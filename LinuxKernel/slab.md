
---
# slab 分配器
伙伴系统适合对大块内存的请求，小块则引发内碎片。

在伙伴系统之上运行内存区分配算法没有显著的效率，此算法前提如下
- 内存区视作对象，由 `数据结构+构造+析构` 组成
- 内核函数倾向于反复请求同一类型的内存区
  > 比如进程描述符，文件对象。进程创建和撤销非常频繁，没有slab时 时间浪费在反复分配和回收那些包含同一内存区的页框上，slab 把那些页框保存在高速缓存中并很快重新使用
- 频繁请求特定大小的内存，通过创建一组具有适当大小的专用对象来高效处理，避免内碎片产生
- 伙伴系统每次调用都会把无用信息写进 高速缓存，增加了对内存的平均访问时间

slab 把对象分组放进高速缓存，比如“打开文件”的 filp文件指针 的slab  
包含高速缓存的主内存区被划分为多个slab，每个slab由一个或多个连续的页框组成，包含已分配和空闲的对象

slub把内存分组管理，每组包含 2^n(3<= n <=11), 另外还有两个特殊的 96B 和 192B

## slab 着色